# Настройка OAuth авторизации

## Поддерживаемые провайдеры

1. Яндекс
2. ВКонтакте

## Настройка Яндекс OAuth

1. Перейдите в [Яндекс OAuth](https://oauth.yandex.ru/)
2. Создайте новое приложение
3. Укажите следующие настройки:
   - Название: Tomilo-lib.ru
   - Права доступа: Доступ к email адресу
   - Callback URI: http://localhost:3000/auth/yandex/callback (или ваш домен)
4. После создания приложения вы получите Client ID и Client Secret
5. Добавьте их в ваш .env файл:
   ```
   YANDEX_CLIENT_ID=ваш_client_id
   YANDEX_CLIENT_SECRET=ваш_client_secret
   ```

## Настройка ВКонтакте OAuth

1. Перейдите в [VK Developers](https://vk.com/dev)
2. Создайте новое приложение
3. Укажите следующие настройки:
   - Название: Tomilo-lib.ru
   - Тип приложения: Standalone-приложение
   - Callback URI: http://localhost:3000/auth/vk/callback (или ваш домен)
4. После создания приложения вы получите Application ID и Secure key
5. Добавьте их в ваш .env файл:
   ```
   VK_CLIENT_ID=ваш_application_id
   VK_CLIENT_SECRET=ваш_secure_key
   VK_REDIRECT_URI=http://localhost:3000/auth/vk/callback
   ```

## Использование OAuth

### Авторизация через Яндекс

1. Перенаправьте пользователя на URL авторизации Яндекса
2. После авторизации пользователь будет перенаправлен на ваш callback URL с кодом
3. Отправьте POST запрос на `/auth/yandex` с телом:
   ```json
   {
     "code": "код_авторизации"
   }
   ```

### Авторизация через ВКонтакте

1. Перенаправьте пользователя на URL авторизации ВКонтакте
2. После авторизации пользователь будет перенаправлен на ваш callback URL с кодом
3. Отправьте POST запрос на `/auth/vk` с телом:
   ```json
   {
     "code": "код_авторизации"
   }
   ```

## Особенности

- Пользователи, авторизованные через OAuth, получают случайно сгенерированный пароль
- Они могут использовать функцию восстановления пароля для установки собственного пароля
- OAuth пользователи могут использовать как OAuth, так и обычную авторизацию после установки пароля
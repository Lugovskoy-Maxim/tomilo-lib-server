name: Simple SSH Test

on:
  workflow_dispatch:

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
    - name: Simple connection test
      run: |
        ssh -o StrictHostKeyChecking=no \
            -i <(echo "${{ secrets.VM_SSH_KEY }}") \
            ${{ secrets.VM_USERNAME }}@${{ secrets.VM_HOST }} \
            "echo 'SSH success!'" || echo "SSH failed"
